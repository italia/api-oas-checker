"use strict";(globalThis.webpackChunkapi_oas_checker=globalThis.webpackChunkapi_oas_checker||[]).push([[8468],{18468:(e,r,t)=>{t.r(r),t.d(r,{default:()=>v});var n=t(67294),a=t(9669),o=t.n(a),i=t(50158),c=t(55217),s=t(91296),u=t.n(s),g=t(49133),l=t(95998),d=t(49795),h=t(67595),f=t(76362),m=t(14586);const M=(0,g.QM)({editor:{height:"calc(100vh - 90px)"},editorMarginHint:{backgroundColor:"var(--light)"},editorMarginInfo:{backgroundColor:"var(--info)"},editorMarginError:{backgroundColor:"var(--danger)"},editorMarginWarning:{backgroundColor:"var(--warning)"},editorHighlightLine:{backgroundColor:"var(--primary)"}}),v=()=>{const e=(0,n.useRef)(null),r=(0,n.useRef)({}),t=(0,n.useRef)([]),a=M(),s=(0,l.v9)((e=>(0,h.eE)(e))),g=(0,l.v9)((e=>(0,h.F$)(e))),v=(0,l.v9)((e=>(0,h.uF)(e))),p=(0,l.v9)((e=>(0,h.Ru)(e))),b=(0,l.v9)((e=>(0,h.o0)(e))),k=(0,l.I0)();return(0,n.useEffect)((()=>{(0,c.setDiagnosticsOptions)({enableSchemaRequest:!0,hover:!0,completion:!0,validate:!0,format:!0,schemas:[{uri:"oas3-completion.schema.json",fileMatch:["*"]}]}),r.current=i.editor.create(e.current,{value:"",language:"yaml",glyphMargin:!0,theme:"vs-dark",automaticLayout:!0}),r.current.getModel().updateOptions({tabSize:2}),r.current.onDidChangeModelContent(u()((()=>{const e=r.current.getModel().getValue();k((0,d.tD)(e))}),1e3)),r.current.changeViewZones((e=>{e.addZone({afterLineNumber:0,heightInPx:20,domNode:document.createElement("span")})}))}),[k]),(0,n.useEffect)((()=>{b?(e=>{try{const{data:t}={data:(0,f.Pj)(e)};r.current.getModel().setValue(t),k((0,d.tD)(t))}catch(e){console.error(e),alert(e.message)}})(b):v?(async e=>{try{const{data:t}=await o().get(e);r.current.getModel().setValue(t),k((0,d.tD)(t))}catch(e){console.error(e),alert(e.message)}})(v):p&&(async e=>{try{r.current.getModel().setValue(e.toString()),k((0,d.tD)(e.toString()))}catch(e){console.error(e),alert(e.message)}})(p)}),[v,p,b,k]),(0,n.useEffect)((()=>{if(null===s)return void(t.current=r.current.deltaDecorations(t.current,[]));const e=(0,m.Wg)(s);r.current.deltaDecorations(t.current,[]);const n=[];for(const[r,t]of e.entries())n.push({range:new i.Range(Number(r),1,Number(r),1),options:{glyphMarginClassName:(0,m.g9)(t)===f.pn?a.editorMarginError:(0,m.g9)(t)===f.cM?a.editorMarginWarning:(0,m.g9)(t)===f.H_?a.editorMarginInfo:(0,m.g9)(t)===f.R0?a.editorMarginHint:a.editorMarginError}});t.current=r.current.deltaDecorations([],n)}),[s,a.editorHighlightLine,a.editorMarginError,a.editorMarginWarning,a.editorMarginInfo,a.editorMarginHint]),(0,n.useEffect)((()=>{g&&(r.current.revealLineInCenter(g.line),r.current.setPosition({lineNumber:g.line,column:g.character}),r.current.focus())}),[g]),n.createElement("div",{ref:e,className:a.editor})}}}]);