(globalThis.webpackChunkapi_oas_checker=globalThis.webpackChunkapi_oas_checker||[]).push([[468],{8468:(e,r,n)=>{"use strict";n.r(r),n.d(r,{default:()=>p});var t=n(7294),a=n(9669),o=n.n(a),c=n(158),i=n(1296),u=n.n(i),s=n(2106),l=n(9226),g=n(9795),d=n(7595),h=n(3722),f=n(4586);const m=(0,s.QM)({editor:{height:"calc(100vh - 90px)"},editorMarginError:{backgroundColor:"var(--danger)"},editorMarginWarning:{backgroundColor:"var(--warning)"},editorHighlightLine:{backgroundColor:"var(--primary)"}}),p=()=>{const e=(0,t.useRef)(null),r=(0,t.useRef)({}),n=(0,t.useRef)([]),a=m(),i=(0,l.v9)((e=>(0,d.eE)(e))),s=(0,l.v9)((e=>(0,d.F$)(e))),p=(0,l.v9)((e=>(0,d.uF)(e))),v=(0,l.I0)();return(0,t.useEffect)((()=>{r.current=c.editor.create(e.current,{value:"",language:"yaml",glyphMargin:!0,theme:"vs-dark",automaticLayout:!0}),r.current.onDidChangeModelContent(u()((()=>{const e=r.current.getModel().getValue();v((0,g.tD)(e))}),1e3)),r.current.changeViewZones((e=>{e.addZone({afterLineNumber:0,heightInPx:20,domNode:document.createElement("span")})}))}),[v]),(0,t.useEffect)((()=>{if(!p)return null;(async()=>{try{const{data:e}=await o().get(p);r.current.getModel().setValue(e),v((0,g.tD)(e))}catch(e){console.error(e),alert(e.message)}})()}),[p,v]),(0,t.useEffect)((()=>{if(null===i)return void(n.current=r.current.deltaDecorations(n.current,[]));const e=(0,f.Wg)(i);r.current.deltaDecorations(n.current,[]);const t=[];for(const[r,n]of e.entries())t.push({range:new c.Range(Number(r),1,Number(r),1),options:{glyphMarginClassName:(0,f.g9)(n)===h.pn?a.editorMarginError:a.editorMarginWarning}});n.current=r.current.deltaDecorations([],t)}),[i,a.editorHighlightLine,a.editorMarginError,a.editorMarginWarning]),(0,t.useEffect)((()=>{s&&(r.current.revealLineInCenter(s.line),r.current.setPosition({lineNumber:s.line,column:s.character}),r.current.focus())}),[s]),t.createElement("div",{ref:e,className:a.editor})}}}]);