"use strict";(globalThis.webpackChunkapi_oas_checker=globalThis.webpackChunkapi_oas_checker||[]).push([[1616],{61616:(e,r,t)=>{t.r(r),t.d(r,{default:()=>p});var n=t(39471),o=t(55399),a=t(71559),c=t(3255),i=t(84042),s=t(28357),u=t(61067),l=t(50730),d=t.n(l),g=t(11569),f=t(48638);var h=t(74082);const m=(0,o.MA)({editor:{height:"calc(100vh - 90px)"},editorMarginHint:{backgroundColor:"var(--light)"},editorMarginInfo:{backgroundColor:"var(--info)"},editorMarginError:{backgroundColor:"var(--danger)"},editorMarginWarning:{backgroundColor:"var(--warning)"},editorHighlightLine:{backgroundColor:"var(--primary)"}}),p=()=>{const e=(0,n.useRef)(null),r=m(),t=(0,a.wA)(),o=(0,a.d4)(i.mr),l=(0,a.d4)(i.kF),p=(0,a.d4)(i.tT),b=(0,a.d4)(i.Ip),M=(0,a.d4)(i.IJ),v=(0,a.d4)(i.IZ),k=(0,a.d4)(i.HF),C=((e,r)=>{const t=(0,n.useRef)(null),[o,a]=(0,n.useState)(null),c=(0,n.useCallback)(d()(e=>{const t=e.getModel().getValue();r&&r(t)},1e3),[r]);return(0,n.useEffect)(()=>{if(!e.current)return;(0,u.rJ)({enableSchemaRequest:!0,hover:!0,completion:!0,validate:!0,format:!0,schemas:[{uri:"oas3-completion.schema.json",fileMatch:["*"]}]});const r=s.editor.create(e.current,{value:"",language:"yaml",glyphMargin:!0,theme:"vs-dark",automaticLayout:!0});r.getModel().updateOptions({tabSize:2}),r.changeViewZones(e=>{e.addZone({afterLineNumber:0,heightInPx:20,domNode:document.createElement("span")})});const n=r.onDidChangeModelContent(()=>{c(r)});return r.flushChanges=()=>c.flush(),window.editor=r,t.current=r,a(r),()=>{n.dispose(),r.dispose(),c.cancel(),t.current=null,a(null)}},[e,c]),o})(e,(0,n.useCallback)(e=>{""===e.trim()&&t((0,c.oQ)(null)),t((0,c.R2)(e))},[t]));return(0,n.useEffect)(()=>{C&&void 0!==k&&k!==C.getValue()&&C.setValue(k)},[C,k]),((e,r,t,o,a)=>{(0,n.useEffect)(()=>{if(!e)return;const n=r=>{const t=e.getModel();t&&(t.setValue(r),a((0,c.R2)(r)))};o?(e=>{try{const r=(0,f.jc)(e);n(r)}catch(e){console.error("Error decoding document from param:",e)}})(o):r?(async e=>{try{const{data:r}=await g.A.get(e);n(r)}catch(e){console.error("Error loading document from URL:",e)}})(r):t&&(async e=>{try{const r=e.toString();n(r)}catch(e){console.error("Error loading document from file:",e)}})(t)},[e,r,t,o,a])})(C,p,b,M,t),((e,r,t)=>{const o=(0,n.useRef)([]);(0,n.useEffect)(()=>{if(!e)return;if(null===r)return void(o.current=e.deltaDecorations(o.current,[]));const n=(0,h.FX)(r),a=[];for(const[e,r]of n.entries()){const n=(0,h.hw)(r);let o=t.editorMarginError;n===f.Nz?o=t.editorMarginWarning:n===f.rD?o=t.editorMarginInfo:n===f.Sc&&(o=t.editorMarginHint),a.push({range:new s.Range(Number(e),1,Number(e),1),options:{glyphMarginClassName:o}})}o.current=e.deltaDecorations(o.current,a)},[e,r,t])})(C,o,r),(0,n.useEffect)(()=>{C&&l&&(C.revealLineInCenter(l.line),C.setPosition({lineNumber:l.line,column:l.character}),C.focus())},[C,l]),(0,n.useEffect)(()=>{if(!C||!v)return;const{tabSize:e}=v,r=C.getModel();r&&(r.updateOptions({tabSize:e}),C.getAction("editor.action.formatDocument").run())},[C,v]),n.createElement("div",{ref:e,className:r.editor})}}}]);