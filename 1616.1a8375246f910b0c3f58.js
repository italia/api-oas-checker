"use strict";(globalThis.webpackChunkapi_oas_checker=globalThis.webpackChunkapi_oas_checker||[]).push([[1616],{61616:(e,r,n)=>{n.r(r),n.d(r,{default:()=>p});var t=n(96540),o=n(4605),a=n(2896),c=n(3255),i=n(84042),s=n(14871),l=n(85319),u=n(20181),d=n.n(u),g=n(71083),h=n(48638);var f=n(74082);const m=(0,o.MA)({editor:{height:"calc(100vh - 90px)"},editorMarginHint:{backgroundColor:"var(--light)"},editorMarginInfo:{backgroundColor:"var(--info)"},editorMarginError:{backgroundColor:"var(--danger)"},editorMarginWarning:{backgroundColor:"var(--warning)"},editorHighlightLine:{backgroundColor:"var(--primary)"}}),p=()=>{const e=(0,t.useRef)(null),r=m(),n=(0,a.wA)(),o=(0,a.d4)(i.mr),u=(0,a.d4)(i.kF),p=(0,a.d4)(i.tT),b=(0,a.d4)(i.Ip),M=(0,a.d4)(i.IJ),k=((e,r)=>{const n=(0,t.useRef)(null),[o,a]=(0,t.useState)(null),c=(0,t.useCallback)(d()((e=>{const n=e.getModel().getValue();r&&r(n)}),1e3),[r]);return(0,t.useEffect)((()=>{if(!e.current)return;(0,l.setDiagnosticsOptions)({enableSchemaRequest:!0,hover:!0,completion:!0,validate:!0,format:!0,schemas:[{uri:"oas3-completion.schema.json",fileMatch:["*"]}]});const r=s.editor.create(e.current,{value:"",language:"yaml",glyphMargin:!0,theme:"vs-dark",automaticLayout:!0});r.getModel().updateOptions({tabSize:2}),r.changeViewZones((e=>{e.addZone({afterLineNumber:0,heightInPx:20,domNode:document.createElement("span")})}));const t=r.onDidChangeModelContent((()=>{c(r)}));return n.current=r,a(r),()=>{t.dispose(),r.dispose(),c.cancel(),n.current=null,a(null)}}),[e,c]),o})(e,(0,t.useCallback)((e=>{""===e.trim()&&n((0,c.oQ)(null)),n((0,c.R2)(e))}),[n]));return((e,r,n,o,a)=>{(0,t.useEffect)((()=>{if(!e)return;const t=r=>{const n=e.getModel();n&&(n.setValue(r),a((0,c.R2)(r)))};o?(e=>{try{const r=(0,h.jc)(e);t(r)}catch(e){console.error("Error decoding document from param:",e)}})(o):r?(async e=>{try{const{data:r}=await g.A.get(e);t(r)}catch(e){console.error("Error loading document from URL:",e)}})(r):n&&(async e=>{try{const r=e.toString();t(r)}catch(e){console.error("Error loading document from file:",e)}})(n)}),[e,r,n,o,a])})(k,p,b,M,n),((e,r,n)=>{const o=(0,t.useRef)([]);(0,t.useEffect)((()=>{if(!e)return;if(null===r)return void(o.current=e.deltaDecorations(o.current,[]));const t=(0,f.FX)(r),a=[];for(const[e,r]of t.entries()){const t=(0,f.hw)(r);let o=n.editorMarginError;t===h.Nz?o=n.editorMarginWarning:t===h.rD?o=n.editorMarginInfo:t===h.Sc&&(o=n.editorMarginHint),a.push({range:new s.Range(Number(e),1,Number(e),1),options:{glyphMarginClassName:o}})}o.current=e.deltaDecorations(o.current,a)}),[e,r,n])})(k,o,r),(0,t.useEffect)((()=>{k&&u&&(k.revealLineInCenter(u.line),k.setPosition({lineNumber:u.line,column:u.character}),k.focus())}),[k,u]),t.createElement("div",{ref:e,className:r.editor})}}}]);