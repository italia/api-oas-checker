"use strict";(globalThis.webpackChunkapi_oas_checker=globalThis.webpackChunkapi_oas_checker||[]).push([[6209],{76209:(e,r,t)=>{t.r(r),t.d(r,{default:()=>M});var n=t(96540),a=t(71083),o=t(14871),i=t(85319),c=t(20181),s=t.n(c),u=t(4605),l=t(2896),g=t(3255),d=t(84042),h=t(48638),f=t(74082);const m=(0,u.MA)({editor:{height:"calc(100vh - 90px)"},editorMarginHint:{backgroundColor:"var(--light)"},editorMarginInfo:{backgroundColor:"var(--info)"},editorMarginError:{backgroundColor:"var(--danger)"},editorMarginWarning:{backgroundColor:"var(--warning)"},editorHighlightLine:{backgroundColor:"var(--primary)"}}),M=()=>{const e=(0,n.useRef)(null),r=(0,n.useRef)({}),t=(0,n.useRef)([]),c=m(),u=(0,l.d4)((e=>(0,d.mr)(e))),M=(0,l.d4)((e=>(0,d.kF)(e))),p=(0,l.d4)((e=>(0,d.tT)(e))),b=(0,l.d4)((e=>(0,d.Ip)(e))),v=(0,l.d4)((e=>(0,d.IJ)(e))),k=(0,l.wA)();return(0,n.useEffect)((()=>{(0,i.setDiagnosticsOptions)({enableSchemaRequest:!0,hover:!0,completion:!0,validate:!0,format:!0,schemas:[{uri:"oas3-completion.schema.json",fileMatch:["*"]}]}),r.current=o.editor.create(e.current,{value:"",language:"yaml",glyphMargin:!0,theme:"vs-dark",automaticLayout:!0}),r.current.getModel().updateOptions({tabSize:2}),r.current.onDidChangeModelContent(s()((()=>{const e=r.current.getModel().getValue();""===e.trim()&&k((0,g.oQ)(null)),k((0,g.R2)(e))}),1e3)),r.current.changeViewZones((e=>{e.addZone({afterLineNumber:0,heightInPx:20,domNode:document.createElement("span")})}))}),[k]),(0,n.useEffect)((()=>{v?(e=>{try{const{data:t}={data:(0,h.jc)(e)};r.current.getModel().setValue(t),k((0,g.R2)(t))}catch(e){console.error(e),alert(e.message)}})(v):p?(async e=>{try{const{data:t}=await a.A.get(e);r.current.getModel().setValue(t),k((0,g.R2)(t))}catch(e){console.error(e),alert(e.message)}})(p):b&&(async e=>{try{r.current.getModel().setValue(e.toString()),k((0,g.R2)(e.toString()))}catch(e){console.error(e),alert(e.message)}})(b)}),[p,b,v,k]),(0,n.useEffect)((()=>{if(null===u)return void(t.current=r.current.deltaDecorations(t.current,[]));const e=(0,f.FX)(u);r.current.deltaDecorations(t.current,[]);const n=[];for(const[r,t]of e.entries())n.push({range:new o.Range(Number(r),1,Number(r),1),options:{glyphMarginClassName:(0,f.hw)(t)===h.ff?c.editorMarginError:(0,f.hw)(t)===h.Nz?c.editorMarginWarning:(0,f.hw)(t)===h.rD?c.editorMarginInfo:(0,f.hw)(t)===h.Sc?c.editorMarginHint:c.editorMarginError}});t.current=r.current.deltaDecorations([],n)}),[u,c.editorHighlightLine,c.editorMarginError,c.editorMarginWarning,c.editorMarginInfo,c.editorMarginHint]),(0,n.useEffect)((()=>{M&&(r.current.revealLineInCenter(M.line),r.current.setPosition({lineNumber:M.line,column:M.character}),r.current.focus())}),[M]),n.createElement("div",{ref:e,className:c.editor})}}}]);