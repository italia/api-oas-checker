rules:
  response-with-json-object:
    description: |-
      JSON responses MUST use JSON objects, in order to be extensible.
      
      For example, instead of a list `[1, 2, 3]` you should return
      an object `{"items": [1, 2, 3]}`.
      
      This allows the schema to evolve in a backward compatible ways.
    message: |-
      JSON responses must use json objects (eg "{}"), not {{value}}. {{path}}
    severity: warn
    recommended: true
    given: >-
      $.[responses][*][content][?(@property.match("json$"))][schema]
    then:
      field: type
      function: pattern
      functionOptions:
        match: object
